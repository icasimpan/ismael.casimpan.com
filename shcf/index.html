<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Ismael Angelo A. Casimpan Jr.">
    <meta name="description" content="My personal website">
    <meta name="keywords" content="blog,sysadmin,personal">

    <base href="">
    <title>
  SHCF: Shell Scripting Dev&#39;t Kit and Coding Framework · icasimpan
</title>

    <link rel="canonical" href="/shcf/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.da5204b40ef8cbcb52b75a8cac5656a9cebc00a15e25c865a4b84a3c06b3ed82.css" integrity="sha256-2lIEtA74y8tSt1qMrFZWqc68AKFeJchlpLhKPAaz7YI=" crossorigin="anonymous" media="screen" />
    

    

    
      <link rel="stylesheet" href="css/custom.css">
    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.89.2" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="">
      icasimpan
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/projects/">Projects</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/quicktasks/">QuickTasks</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/links/">Links</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/about/">About</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>SHCF: Shell Scripting Dev&#39;t Kit and Coding Framework</h1>
    </header>

    <h1 id="whats-shcf">WHAT&rsquo;S SHCF?</h1>
<p>If you&rsquo;ve used the previous version of SHCF, now you would use it even more. SHCF is no longer just a Shell Coding Framework but a Shell Scripting Development Kit as well. Where before you used to get one for free, now you&rsquo;ll get two and still for free!</p>
<p>Ok, enough of the convincing lines. Seriously, I wrote this tool as I needed it myself and I&rsquo;ve noticed that there&rsquo;s practically nothing that satisfies my definition of light and simple framework for shell scripting. I&rsquo;m sharing this with you so that hopefully, it would help you create shell scripts faster and with focus on your scripting and not on how this framework works.</p>
<p>A little disclaimer though: we only support <strong>bash</strong> at the moment.</p>
<p>Anyway, as I&rsquo;ve already told you, this is no longer just a shell coding framework. This is a scripting development kit and you generate the coding framework out of it. I&rsquo;ll show you how it works.</p>
<h1 id="quick-usage-guide">QUICK USAGE GUIDE</h1>
<ol>
<li>Create a new shcf-based shell script</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ git clone https://github.com/shsdk/shcf.git
~$ ./shcf/core/bin/shcf_cli init
~$ shcf_cli new hello_world
</code></pre></div><ol start="2">
<li>Add basic logic, say the greeter() function</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli lib hello_world greeter
</code></pre></div><ol start="3">
<li>
<p>Modify <code>hello_world/lib/greeter.bash.inc</code> to say <strong>hello world</strong></p>
</li>
<li>
<p>Update main script <code>hello_world/bin/hello_world</code> so it calls <code>greeter</code></p>
<p>TIP: Add it to <code>autoload_functions</code> line</p>
</li>
<li>
<p>For additional scripts into your project say <code>whoami</code>:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli hello_world whoami
</code></pre></div><ol start="6">
<li>Further usage, help is available. Just run:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli help
</code></pre></div><h1 id="detailed-usage-guide">DETAILED USAGE GUIDE</h1>
<ol>
<li>Clone the shcf project:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ git clone https://github.com/shsdk/shcf.git
</code></pre></div><ol start="2">
<li>Initialize the environment</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ ./shcf/init.sh
   Platform environment has been set. See below:
     SHCF_PLATFORM_ROOT=/home/your_username/shcf/core
</code></pre></div><p>At this point, you can use <code>shcf_cli</code> from any path so long as you don&rsquo;t use <code>exit</code>.</p>
<ol start="3">
<li>Now, create a new project. Example, <code>hello_world</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli new your_project_dir/hello_world
</code></pre></div><p>A successful creation should be something like below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli new your_project_dir/hello_world
   template script created in your_project_dir/hello_world/bin/hello_world
   Successful creation of your_project_dir/hello_world
</code></pre></div><ol start="4">
<li>Make the template binary in <strong>bin</strong> executable</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ chmod u+x ./your_project_dir/bin/hello_world
</code></pre></div><ol start="5">
<li>Template script is not yet ready. If you insist on running it like below:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ ./hello_world
</code></pre></div><p>Expect to see the following error:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">/home/your_username/your_project_dir/hello_world/lib/autoload_functions.bash.inc: line 26: /home/your_username/your_project_dir/hello_world/lib/rename_function1.bash.inc: No such file or directory
 ERROR: Missing required rename_function1
 /home/your_username/your_project_dir/hello_world/lib/autoload_functions.bash.inc: line 26: /home/your_username/your_project_dir/hello_world/lib/rename_function2.bash.inc: No such file or directory
 ERROR: Missing required rename_function2
 /home/your_username/your_project_dir/hello_world/lib/autoload_functions.bash.inc: line 26: /home/your_username/your_project_dir/hello_world/lib/rename_functionX.bash.inc: No such file or directory
 ERROR: Missing required rename_functionX
</code></pre></div><p>Template <strong>View</strong> (see MVC pattern in <strong>INSPIRATION</strong> section below) included 3 functions that where meant to be replaced or removed, hence the error.
To fix the problem, go to the <strong>Model</strong> (or <code>lib</code> directory) and create a function named &lsquo;greeter()&rsquo; (as file greeter.bash.inc) with contents below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">greeter() {
	   local message=$1
	   echo &#34;$message!&#34;
	}
</code></pre></div><p>TIP: Another approach is to create a template file using command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli lib hello_world greeter
</code></pre></div><p>In <code>bin/hello_world</code>, remove the 3 template functions namely:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"> rename_function1
 rename_function2
 rename_functionX
</code></pre></div><p>and replace it with <code>greeter</code>.</p>
<p>Below, the comment block:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"> ## ..............................
 ## main utility tool starts below
 ## ..............................
</code></pre></div><p>add the line:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"> greeter &#34;Hello, World&#34;
</code></pre></div><p>Of course, save the file.
Re-run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ ./hello_world
</code></pre></div><p>If you followed the instructions correctly, you should see the greeting:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ ./hello_world
    Hello, World!
</code></pre></div><ol start="6">
<li>Now, if you want to add additional script to your project, that is easy. Let&rsquo;s assume you want to create <code>whoami</code>. Just run the command:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli bin hello_world whoami
</code></pre></div><p>Same instructions as above, put the logic, make it executable and you&rsquo;re on.</p>
<ol start="7">
<li>For other usage, help is available. Just run:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ shcf_cli help
</code></pre></div><h1 id="package-builds">PACKAGE BUILDS</h1>
<p>For people who are more comfortable with the usual package installation, SHCF is now available for the two major Linux packages: <strong>rpm</strong> and <strong>deb</strong>.</p>
<p>To install rpm, run the following:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ curl -s https://packagecloud.io/install/repositories/icasimpan/shcf/script.rpm.sh | sudo bash
</code></pre></div><p>For deb installation, run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">~$ curl -s https://packagecloud.io/install/repositories/icasimpan/shcf/script.deb.sh | sudo bash
</code></pre></div><p>Package hosting generously provided by <a href="https://packagecloud.io/icasimpan/shcf">PackageCloud.io</a></p>
<h1 id="inspirations">INSPIRATIONS</h1>
<h2 id="1-model-view-controllermvc-pattern">1. Model-View-Controller(MVC) pattern</h2>
<p>I am not fully sure if I understand the MVC pattern correctly, but in my own understanding:</p>
<table>
<thead>
<tr>
<th>What</th>
<th>Brief Description</th>
<th>Framework Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Model</strong></td>
<td>Business logic or the &ldquo;how&rdquo;. Does the heavy lifting on how specific functionality is carried out.</td>
<td><code>lib</code> (e.g sqlQuery.bash.inc)</td>
</tr>
<tr>
<td><strong>View</strong></td>
<td>The frontliner, the one that faces the demanding customer, the end-user.</td>
<td>scripts created in <code>bin</code></td>
</tr>
<tr>
<td><strong>Controller</strong></td>
<td>Mediator/middle-man directing the requests of the demanding customer(via &lsquo;View&rsquo;) to corresponding &lsquo;model&rsquo;.</td>
<td><code>etc/controller.bash.inc</code></td>
</tr>
</tbody>
</table>
<h2 id="2-auto-loading-in-php">2. Auto-Loading in PHP</h2>
<p>I&rsquo;ve seen a lot of shell scripts, coded a lot myself and as the code grows, so does the maintenance nightmare.
Function duplication is one of the key headaches that it&rsquo;s a must for a simplified way of managing functions/libraries.</p>
<p>In this framework, it can be seen in lib/autoload_functions.bash.inc and will be called in script something like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">   autoload_functions <span style="font-style:italic">&#34;func1 func2 func3 etc&#34;</span>
</code></pre></div><p>The above way to call &lsquo;autoload_function&rsquo; means that functions is directly accessible from &lsquo;lib&rsquo; and NOT in subdirectories.</p>
<p>Autoloading is very flexible and you can re-arrange libraries as you see fit. For example to use sqlQuery function which is stored in &lsquo;lib/db/sql/mysql&rsquo; and &lsquo;ishost_up&rsquo; located in &lsquo;lib/box_mgt&rsquo; you will call &lsquo;autoload_function&rsquo; like</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">   autoload_functions <span style="font-style:italic">&#34;lib/db/sql/mysql/sqlQuery box_mgt/ishost_up&#34;</span>
</code></pre></div><p>In short, auto-loading stays relatively the same. Just prefix a function with the directory where it is stored and no directory name prefix if it is in same level as autoload_functions.bash.inc.</p>
<h2 id="3-drupal-concept-of-custom-and-contrib-modules">3. Drupal concept of custom and contrib modules</h2>
<p>As you may have noticed by now, Auto-loading is very flexible. But my high-level experience of drupal clarified how auto-loading should be done right.
Libraries that is specific to your script MUST be created inside <code>lib/custom</code> while those that are reusable and comes from external sources (e.g. <a href="https://github.com/shsdk/shcf-lib">https://github.com/shsdk/shcf-lib</a>) should be in <code>lib/contrib</code>.</p>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
     © 2022
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-6885542-9', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>

</html>
